====Setting up Virtuoso RDF store====
1) Setup virtuoso using http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/

Notes for myself
ubuntu build http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VOSUbuntuNotes
/usr/bin/isql-vt -- command-line database-access tool, iSQL
/usr/bin/virtuoso-t -- Main daemon executable
/etc/virtuoso-opensource-6.1/virtuoso.ini -- configuration file
/var/lib/virtuoso-opensource-6.1/db/ -- the database itself
/usr/share/virtuoso/vad/ -- datafiles

a) copy data files into /usr/share/virtuoso/vad/ or change virtuoso.ini allowed dir

b) load data using isql /usr/bin/isql-vt

Test sbml data can be downloaded from https://sites.google.com/site/ricordowp4/file-cabinet/sbmltordf

clear graphs if already exist
SPARQL CLEAR GRAPH <http://ricordo.com>;
SPARQL CLEAR GRAPH <http://rdf-schema.com>;
SPARQL CLEAR GRAPH <http://ricordosch.com>;

load graphs
DB.DBA.RDF_LOAD_RDFXML_MT (file_to_string_output ('/usr/share/virtuoso/vad/BIOMD0000000001.rdf'), '', 'http://ricordo.com');
DB.DBA.RDF_LOAD_RDFXML_MT (file_to_string_output ('/usr/share/virtuoso/vad/rdf-schema.rdf'), '', 'http://rdf-schema.com');
DB.DBA.RDF_LOAD_RDFXML_MT (file_to_string_output ('/usr/share/virtuoso/vad/sbmlrdfschema.rdf'), '', 'http://ricordosch.com');

set ricordo-rule
rdfs_rule_set ('ricordo_rule', 'http://ricordosch.com');
rdfs_rule_set ('ricordo_rule', 'http://rdf-schema.com');

To bluk loading of rdf files follow instructions at http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtBulkRDFLoader
SQL> load rdfloader.sql;
SQL> ld_dir('/usr/share/virtuoso/vad/', '*.rdf', 'http://ricordo.com');
SQL> rdf_loader_run();

====Deploying the war file====
Tested on:
tomcat - 6 (http://tomcat.apache.org/)
java - 1.6 (http://www.oracle.com/technetwork/java/index.html)
OS - Ubuntu

1)Download the ricordo-rdfstore-ws.war file from the deploy directory

2)Inside the war file there is a config.properties file.
Edit this file by changing sparql.resource to where you have the rdf template files.
The template files are in resource folder

====Querying the rdf store via the web services====

Lists all Resources
http://localhost:8080/ricordo-rdfstore-ws/service/search/getResources

Using curl to test POST method. eg:

getResourcesByType
curl -i -X POST -HContent-type:application/xml --data "<query><query>http://www.ebi.ac.uk/ricordo/toolbox/sbmlo#SBMLModel</query></query>" http://localhost:8080/service/search/getResourcesByType

getResourceForAnnotationOfElement
curl -i -X POST -HContent-type:application/xml --data "<query><query>http://identifiers.org/obo.go/GO:0031594</query></query>" http://localhost:8080/service/search/getResourceForAnnotationOfElement

getResourceForAnnotation
curl -i -X POST -HContent-type:application/xml --data "<query><query>http://identifiers.org/obo.go/GO:0031594</query></query>" http://localhost:8080/service/search/getResourceForAnnotation

getElementOfResource
curl -i -X POST -HContent-type:application/xml --data "<query><query>http://www.ebi.ac.uk/ricordo/toolbox/sbmlo#BIOMD0000000001</query></query>" http://localhost:8080/service/search/getElementOfResource

getAnnotationOfResource
curl -i -X POST -HContent-type:application/xml --data "<query><query>http://www.ebi.ac.uk/ricordo/toolbox/sbmlo#BIOMD0000000001</query></query>" http://localhost:8080/service/search/getAnnotationOfResource

getAnnotationOfElementOfResource
curl -i -X POST -HContent-type:application/xml --data "<query><query>http://www.ebi.ac.uk/ricordo/toolbox/sbmlo#BIOMD0000000001</query></query>" http://localhost:8080/service/search/getAnnotationOfElementOfResource

You can also test it using RESTClient https://addons.mozilla.org/en-US/firefox/addon/restclient/
eg:
Method: POST
URL: http://localhost:8080/ricordo-rdfstore-ws/service/search/getResourcesByType
Headers: Content-Type application/xml
Body: <query><query>http://www.ebi.ac.uk/ricordo/toolbox/sbmlo#SBMLModel</query></query>

